<?xml version="1.0"?>
<odoo>
    <data>
        
        <!-- Hr Applicant Kanban View -->
        <record model="ir.ui.view" id="hr_recruitment_user_view_kanban_applicant">
            <field name="name">Hr Applicants kanban</field>
            <field name="model">hr.applicant</field>
            <field name="arch" type="xml">
                <kanban default_group_by="stage_id" class="o_kanban_applicant" create="false" disable_sort_column='true' disable_sort_record='true' disable_drag_drop_record='true'>
                    <field name="stage_id" options='{"group_by_tooltip": {"requirements": "Requirements"}}'/>
                    <field name="color"/>
                    <field name="priority"/>
                    <field name="user_id"/>
                    <field name="user_email"/>
                    <field name="partner_name"/>
                    <field name="type_id"/>
                    <field name="job_id"/>
                    <field name="department_id"/>
                    <field name="message_needaction_counter"/>
                    <field name="attachment_number"/>
                    <field name="active"/>
                    <field name="activity_ids" />
                    <field name="activity_state" />
                    <templates>
                        <t t-name="kanban-tooltip">
                            <ul class="oe_kanban_tooltip">
                                <li t-if="record.type_id.raw_value"><b>Degree:</b> <field name="type_id"/></li>
                                <li t-if="record.partner_id.raw_value"><b>Contact:</b> <field name="partner_id"/></li>
                                <li t-if="record.department_id.raw_value"><b>Departement:</b> <field name="department_id"/></li>
                            </ul>
                        </t>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_card oe_kanban_global_click oe_applicant_kanban oe_semantic_html_override">
                                <div class="o_dropdown_kanban dropdown">
                                </div>
                                <div class="oe_kanban_content" tooltip="kanban-tooltip">
                                    <div class="o_kanban_record_top">
                                        <img t-att-src="kanban_image('res.users', 'image_small', record.user_id.raw_value)" t-att-title="record.user_id.value" width="30" height="30" class="oe_kanban_avatar mr8"/>
                                        <div class="o_kanban_record_headings">
                                            <b class="o_kanban_record_title mt8" t-if="record.partner_name.raw_value">
                                                <field name="partner_name"/><br/>
                                            </b><t t-else="1">
                                                <i class="o_kanban_record_title"><field name="name"/></i><br/>
                                            </t>
                                            <div class="o_kanban_record_subtitle" invisible="context.get('search_default_job_id', False)">
                                                <field name="job_id"/>
                                            </div>
                                        </div>
                                    </div>
                                    <field name="categ_ids" widget="many2many_tags" options="{'color_field': 'color'}"/>
                                    <t t-if="record.partner_mobile.raw_value"><i class="fa fa-mobile mr4"/><field name="partner_mobile"/><br/></t>
                                    <div class="o_kanban_record_bottom mt4">
                                        <div class="oe_kanban_bottom_left">
                                            <a t-if="record.attachment_number" name="action_get_attachment_tree_view" type="object"> <field name="attachment_number"/> Documents</a>
                                        </div>
                                        <div class="oe_kanban_bottom_right">
                                            <t t-if="record.message_needaction_counter.raw_value">
                                                <span class='oe_kanban_mail_new mr4' title='Unread Messages'><i class='fa fa-comments'/><t t-raw="record.message_needaction_counter.raw_value"/></span>
                                            </t>
                                            <div class="o_kanban_inline_block mr8">
                                                <field name="activity_ids" widget="kanban_activity"/>
                                            </div>
                                            <div class="pull-left mr4" groups="base.group_user">
                                                <field name="priority" widget="priority"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="oe_clear"></div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record model="ir.ui.view" id="hr_recruitment_user_view_job_applicant">
            <field name="name">Jobs - Recruitment Form</field>
            <field name="model">hr.applicant</field>
            <field name="arch" type="xml">
            <form string="Jobs - Recruitment Form" create="false" edit="false" delete="false">
                <header>
                    <field name="stage_id" widget="statusbar" clickable="True" options="{'fold_field': 'fold'}" attrs="{'invisible': [('active', '=', False),('emp_id', '=', False)]}" readonly="1"/>
                </header>
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_makeMeeting" class="oe_stat_button" icon="fa-calendar" type="object"
                            help="Schedule interview with this applicant">
                            <div class="o_field_widget o_stat_info">
                                <span class="o_stat_text">Meetings</span>
                            </div>
                        </button>
                        <button name="action_get_attachment_tree_view"
                            class="oe_stat_button"
                            icon="fa-book"
                            type="object">
                            <field name="attachment_number" widget="statinfo" string="Documents"/>
                        </button>
                        <button name="action_get_created_employee"
                            class="oe_stat_button"
                            icon="fa-user"
                            type="object"
                            attrs="{'invisible': [('emp_id', '=', False)]}">
                            <field name="employee_name" widget="statinfo" string="Employee"/>
                        </button>
                        <button name="toggle_active" type="object"
                                class="oe_stat_button" icon="fa-archive"
                                attrs="{'invisible': [('active', '=', True)]}">
                            <field name="active" widget="boolean_button"
                                options='{"terminology": "archive"}'/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only"/>
                        <h1><field name="name"/></h1>
                        <h2 class="o_row">
                            <div>
                                <label for="partner_name" class="oe_edit_only"/>
                                <field name="partner_name"/>
                            </div>
                            <div>
                                <label for="categ_ids" class="oe_edit_only"/>
                                <field name="categ_ids" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
                            </div>
                        </h2>
                    </div>
                    <group>
                        <group>
                            <field name="partner_id"/>
                            <field name="email_from" widget="email"/>
                            <field name="partner_phone"/>
                            <field name="partner_mobile"/>
                            <field name="type_id" placeholder="Degree"/>
                        </group>
                        <group>
                            <field name="user_id"/>
                            <field name="priority" widget="priority"/>
                            <field name="medium_id" groups="base.group_no_one" />
                            <field name="source_id"/>
                            <field name="reference"/>
                        </group>
                        <group string="Job">
                            <field name="job_id"/>
                            <field name="department_id"/>
                            <field name="company_id" groups="base.group_multi_company" options='{"no_open":True}' />
                        </group>
                        <group string="Contract">
                            <label for="salary_expected"/>
                            <div>
                                <field name="salary_expected" class="oe_inline"/>
                                <span class="oe_inline" attrs="{'invisible':[('salary_expected_extra','=',False)]}"> + </span>
                                <field name="salary_expected_extra" class="oe_inline" placeholder="Extra advantages..."/>
                            </div>
                            <label for="salary_proposed"/>
                            <div>
                                <field name="salary_proposed" class="oe_inline"/>
                                <span class="oe_inline" attrs="{'invisible':[('salary_proposed_extra','=',False)]}"> + </span>
                                <field name="salary_proposed_extra" class="oe_inline" placeholder="Extra advantages..."/>
                            </div>
                            <field name="availability"/>
                            <field name="emp_id" invisible="1"/>
                        </group>
                    </group>
                    <separator string="Application Summary"/>
                    <field name="description" placeholder="Feedback of interviews..."/>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread" options="{'post_refresh': 'recipients'}"/>
                </div>
            </form>
            </field>
        </record>

        ######################## JOB OPPORTUNITIES (menu) ###########################
        <record model="ir.actions.act_window" id="action_menu_group_hr_recruitment_user_view">
            <field name="name">Applications</field>
            <field name="res_model">hr.applicant</field>
            <field name="view_mode">kanban,form</field>
            <field name="view_id" eval="False"/>
            <field name="context">{}</field>
            <field name="help" type="html">
            <p>
                Odoo helps you track applicants in the recruitment
                process and follow up all operations: meetings, interviews, etc.
            </p><p>
                Applicants and their attached CV are created automatically when an email is sent.
                If you install the document management modules, all resumes are indexed automatically,
                so that you can easily search through their content.
            </p>
            </field>
        </record>

        <record model="ir.actions.act_window.view" id="action_hr_recruitment_user_view_kanban_applicant">
            <field name="sequence" eval="0"/>
            <field name="view_mode">kanban</field>
            <field name="view_id" ref="hr_recruitment_user_view_kanban_applicant"/>
            <field name="act_window_id" ref="action_menu_group_hr_recruitment_user_view"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_hr_recruitment_user_view_job_applicant">
            <field name="sequence" eval="1"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="hr_recruitment_user_view_job_applicant"/>
            <field name="act_window_id" ref="action_menu_group_hr_recruitment_user_view"/>
        </record>
        
    </data>
</odoo>